<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>WebVR Новелла</title>
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
</head>
<body>
  <div id="scene-container">
    <a-scene>
      <a-assets>
        <audio id="click-sound" src="sounds/blip/blick_click.wav"></audio>
      </a-assets>

      <a-sky color="#ECECEC"></a-sky>
      <a-entity environment="preset: starry;"></a-entity>

      <!-- Камера -->
      <a-camera position="0 1 0" wasd-controls="enabled: false"></a-camera>

      <!-- Контроллеры Pico 4 -->
      <a-entity 
        id="left-controller" 
        laser-controls="hand: left" 
        position="0 1 0" 
        raycaster="objects: .clickable; far: 10; lineColor: white; lineOpacity: 0.5"
        sound="src: #click-sound; on: click">
      </a-entity>

      <a-entity 
        id="right-controller" 
        laser-controls="hand: right" 
        position="0 1 0" 
        raycaster="objects: .clickable; far: 10; lineColor: white; lineOpacity: 0.5"
        sound="src: #click-sound; on: click">
      </a-entity>

      <!-- Кнопка для смены сцены -->
      <a-entity position="0 1 -2">
        <a-plane id="button" class="clickable" width="1" height="0.4" color="#008CBA"></a-plane>
        <a-text value="Next" align="center" color="white" position="0 0 0.01"></a-text>
      </a-entity>
    </a-scene>
  </div>

  <script>
    function loadScene(url) {
      fetch(url)
        .then(response => response.text())
        .then(html => {
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, 'text/html');
          const newScene = doc.querySelector('a-scene');

          if (newScene) {
            const sceneContainer = document.getElementById('scene-container');
            sceneContainer.innerHTML = ''; // Удаляем текущую сцену
            
            setTimeout(() => {
              sceneContainer.appendChild(newScene); // Добавляем новую сцену
            }, 100); // Даем браузеру время обработать изменения
          }
        })
        .catch(error => console.error('Ошибка загрузки сцены:', error));
    }

    document.querySelector('#button').addEventListener('click', function () {
      loadScene('scene1.html');
    });
  </script>
</body>
</html>