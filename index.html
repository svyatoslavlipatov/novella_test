<html>
  <head>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
  </head>
  <body>
    <a-scene id="mainScene">
      <a-sky color="#ECECEC"></a-sky>
      <a-entity environment="preset: starry;"></a-entity>

      <!-- Камера -->
      <a-camera position="0 1 0" wasd-controls="enabled: false"></a-camera>

      <!-- Контроллеры Pico 4 -->
      <a-entity 
        id="left-controller" 
        laser-controls="hand: left" 
        position="0 1 0" 
        raycaster="objects: .clickable; far: 10; lineColor: white; lineOpacity: 0.5"
        sound="src: #click-sound; on: click">
      </a-entity>

      <a-entity 
        id="right-controller" 
        laser-controls="hand: right" 
        position="0 1 0" 
        raycaster="objects: .clickable; far: 10; lineColor: white; lineOpacity: 0.5"
        sound="src: #click-sound; on: click">
      </a-entity>

      <!-- Кнопка -->
      <a-entity position="0 1 -2">
        <a-plane 
          id="button" 
          class="clickable" 
          width="1" height="0.4" 
          color="#008CBA"
          hoverable
          clickable>
        </a-plane>
        <a-text value="Next" align="center" color="white" position="0 0 0.01"></a-text>
      </a-entity>

      <!-- Звук клика -->
      <a-assets>
        <audio id="click-sound" src="sounds/blip/blick_click.wav"></audio>
      </a-assets>
    </a-scene>

    <script>
      // Компонент для эффекта наведения
      AFRAME.registerComponent('hoverable', {
        init: function () {
          var el = this.el;
          el.addEventListener('mouseenter', function () {
            el.setAttribute('color', '#005F7F');
          });
          el.addEventListener('mouseleave', function () {
            el.setAttribute('color', '#008CBA');
          });
        }
      });

      // Компонент для клика
      AFRAME.registerComponent('clickable', {
        init: function () {
          var el = this.el;
          el.addEventListener('click', function () {
            // Подгрузка новой сцены
            loadScene('scene1.html');
          });
        }
      });

      // Функция для подгрузки и замены сцены
      function loadScene(sceneUrl) {
        fetch(sceneUrl)
          .then(response => response.text())
          .then(data => {
            // Находим текущую сцену
            var scene = document.querySelector('#mainScene');
            // Очищаем текущую сцену, сохраняя только необходимые элементы (например, контроллеры и камеру)
            scene.innerHTML = `
              <a-camera position="0 1 0" wasd-controls="enabled: false"></a-camera>
              <a-entity id="left-controller" laser-controls="hand: left" position="0 1 0" raycaster="objects: .clickable; far: 10; lineColor: white; lineOpacity: 0.5" sound="src: #click-sound; on: click"></a-entity>
              <a-entity id="right-controller" laser-controls="hand: right" position="0 1 0" raycaster="objects: .clickable; far: 10; lineColor: white; lineOpacity: 0.5" sound="src: #click-sound; on: click"></a-entity>
              <a-assets>
                <audio id="click-sound" src="sounds/blip/blick_click.wav"></audio>
              </a-assets>
            `;
            // Добавляем содержимое новой сцены
            scene.insertAdjacentHTML('beforeend', data);
          })
          .catch(error => console.error('Ошибка загрузки сцены:', error));
      }
    </script>
  </body>
</html>