<a-scene id="scene-container">
    <a-sky color="#87CEEB"></a-sky>
    <a-entity environment="preset: forest;"></a-entity>

    <!-- Камера -->
    <a-entity id="camera-wrapper">
        <a-camera position="0 1 0" wasd-controls="enabled: false"></a-camera>
    </a-entity>

    <!-- Контроллеры Pico 4 -->
    <a-entity id="left-controller" laser-controls="hand: left" position="0 1 0" 
              raycaster="objects: .clickable; far: 10; lineColor: white; lineOpacity: 0.5">
    </a-entity>

    <a-entity id="right-controller" laser-controls="hand: right" position="0 1 0" 
              raycaster="objects: .clickable; far: 10; lineColor: white; lineOpacity: 0.5">
    </a-entity>

    <!-- Текст приветствия -->
    <a-text value="Hi" color="red" align="center" position="0 1.5 -2" width="4"></a-text>

    <!-- Кнопка перехода -->
    <a-entity position="0 1 -2">
        <a-plane id="button-next" class="clickable" width="1" height="0.4" color="#008CBA"></a-plane>
        <a-text value="Next" align="center" color="white" position="0 0 0.01"></a-text>
    </a-entity>
</a-scene>

<script>
  // Ждём загрузки DOM перед привязкой события
  document.addEventListener("DOMContentLoaded", function () {
    const nextButton = document.querySelector("#button-next");

    if (nextButton) {
      nextButton.addEventListener("click", function () {
        fetch("scene3.html")
          .then(response => response.text())
          .then(html => {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, "text/html");
            const newSceneContent = doc.querySelector("a-scene").innerHTML;

            // Очищаем сцену, но сохраняем камеру
            let scene = document.querySelector("#scene-container");
            let cameraWrapper = document.querySelector("#camera-wrapper");
            scene.innerHTML = '';
            scene.appendChild(cameraWrapper);

            // Добавляем новую сцену
            scene.insertAdjacentHTML("beforeend", newSceneContent);
          })
          .catch(err => console.error("Ошибка загрузки сцены:", err));
      });
    } else {
      console.error("Кнопка #button-next не найдена!");
    }
  });
</script>
